
{%load staticfiles%}
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap core CSS -->
  <link href=" {% static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="{% static 'css/modern-business.css' %}" rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">

    
    
    
    <title>Mis alumnos</title>
  </head>
<script type="text/javascript">
    
    function accion(num){
        //alert(document.getElementById("elGranMenu").style.display )
        if(num == 1){
            document.getElementById("tipoPost").value="filtro";

            

        }
        if(num == 0){
          document.getElementById("tipoPost").value="reporte";

        }
    
    }
    
</script>

<body>
  <!-- Navigation -->
  <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
      <a class="navbar-brand" href="/home">FitRou</a>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="">Clases</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/rutinas">Rutinas</a>
          </li>
          {%if perms.home.view_alumno%}
          <li class="nav-item">
            <a class="nav-link" href="/home/listado_alumnos/{{user.id}}">Mis alumnos</a>
          </li>
          {%endif%}
          {% if perms.rutina.edit_actividad or perms.rutina.delete_actividad or perms.rutina.edit_rutina or perms.rutina.delete_rutina%}
          <li class="nav-item">
              <a class="nav-link" href="/home/administracion">Administrar</a>
          </li>
          {%endif%}
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="navbarDropdownPortfolio" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{user.username}}</a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownPortfolio">
              <a class="dropdown-item" href="">Perfil</a>
              <a class="dropdown-item" href="{%url 'logout'%}">Salir</a>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </nav>


    <section class="container mt-2">
        
        {%if mensaje%}
        <div class="alert alert-warning" role="alert">
            <h4 class="alert-heading"><i class="fa fa-warning"></i> Â¡Error!</h4>
                
            <h5>{{mensaje}}</h5>
            <hr>
            <strong><h6><a class="mb-0" href="/home/">Volver</a></h6></strong>
        </div>
        {%else%}
        <div class="card" >
            <div class="list-group-item active">
                <div class="row">
                    <div class="col col-sm-11 col-md-11 col-lg-11">
                        <a href="/home/"><h5><img src="{% static 'img/back_blanco.png'%}"></a>Lista de alumnos</h5>
                      </div>
                      <form method="POST"> {% csrf_token %}
                      
                </div>
            </div>
            <!-- Filtrado -->
            
              <div class="alert alert-light" role="alert">
                <div class="row mt-0">
                  <div class="col col-sm-0 col-m-0 col-lg-0">Filtrar:</div>
                  <!-- Rutinas -->
                  <div class="col col-sm-2 col-m-2 col-lg-2">
                      <select class="custom-select" name="rutinas">
                          <option selected >Rutinas</option>
                          {%for rutina in rutinas%}
                          <option value="{{rutina.nombre}}">{{rutina.nombre}}</option>
                          {%endfor%}
                          {%if ruti != None and ruti != "Rutinas"%}
                          <option value="{{ruti}}" selected>{{ruti}}</option>
                          {%endif%}
                      </select> 
                  </div>
                  <!-- Entrenamiento -->
                  <div class="col col-sm-3 col-m-3 col-lg-3">
                      <select class="custom-select" name="entrenamiento">
                        {%if entrenamientoSeleccionado != None%}
                          {%if entrenamientoSeleccionado == "sistema"%}
                            <option value="Tipo entrenamiento">Tipo entrenamiento</option>
                            <option value="sistema" selected>Sistema</option>
                            <option value="profesor">Profesor</option>
                          {%endif%}
                          {%if entrenamientoSeleccionado == "profesor"%}
                            <option value="Tipo entrenamiento">Tipo entrenamiento</option>
                            <option value="sistema" >Sistema</option>
                            <option value="profesor" selected>Profesor</option>
                          {%endif%}
                          {%if entrenamientoSeleccionado == "Tipo entrenamiento"%}
                            <option selected>Tipo entrenamiento</option>
                            <option value="sistema">Sistema</option>
                            <option value="profesor">Profesor</option>
                          {%endif%}
                          {%else%}
                          <option selected>Tipo entrenamiento</option>
                          <option value="sistema">Sistema</option>
                          <option value="profesor">Profesor</option>
                          {%endif%}
                      </select>
                  </div>
                  <!-- Nivel -->
                  <div class="col col-sm-2 col-m-2 col-lg-2">
                      <select class="custom-select" name="nivel">
                          
                          {%if nivelSeleccionado != None%}
                          {%if nivelSeleccionado == "Nivel"%}
                            <option selected>Nivel</option>
                            <option value="Principiante">Principiate</option>
                            <option value="Intermedio">Intermedio</option>
                            <option value="Avanzado">Avanzado</option>
                          {%endif%}
                          {%if nivelSeleccionado == "Principiante"%}
                            <option value="Nivel">Nivel</option>
                            <option value="Principiante" selected>Principiate</option>
                            <option value="Intermedio">Intermedio</option>
                            <option value="Avanzado">Avanzado</option>
                          {%endif%}
                          {%if nivelSeleccionado == "Intermedio"%}
                          <option value="Nivel">Nivel</option>
                          <option value="Principiante" >Principiate</option>
                          <option value="Intermedio" selected>Intermedio</option>
                          <option value="Avanzado">Avanzado</option>
                          {%endif%}
                          {%if nivelSeleccionado == "Avanzado"%}
                            <option value="Nivel">Nivel</option>
                            <option value="Principiante" >Principiate</option>
                            <option value="Intermedio">Intermedio</option>
                            <option value="Avanzado"selected>Avanzado</option>
                          {%endif%}
                          {%else%}
                          <option selected>Nivel</option>
                          <option value="Principiante">Principiate</option>
                          <option value="Intermedio">Intermedio</option>
                          <option value="Avanzado">Avanzado</option>
                          {%endif%}

                        </select>
                  </div>
                  <!-- Boton -->
                  <div class="col col-sm-2 col-m-2 col-lg-2">
                    <input type="hidden" name ="tipoPost" id="tipoPost">
                    <button type="submit" onclick="accion(1)" class="btn btn-primary">Filtrar</button>
                    <button type="submit" class="btn btn-outline-danger" onclick="accion(0)" href="/home/generar_pdf/{{alumnos}}" src="">
                      <img src="{% static 'img/pdf3.png'%}" alt="">
                    </button>

                  </div>
                </div>
              </div>
            </form>
            <!-- DataTable -->
        <div class="">
          <table class="table dataTable" id="mydatatable">
            <thead class="card-header">
              <tr>
                <th>Nombre y Apellido</th>
                <th>Edad</th>
                <th>Rutina</th>
                <th>Entrenamiento</th>
                <th>Nivel</th>
              </tr>
            </thead>
            <tbody>
            {%for alumno in alumnos%}
              <tr>
                <td><a href="/rutinas/ver_perfil/{{alumno.user_id}}">{{alumno.nombre}}, {{alumno.apellido}} </a></td>
                <td>{{alumno.fecha_nac}}</td>
                <td><a href="/rutinas/ver_rutina/{{alumno.rutina_id.id}}">{{alumno.rutina_id}}</a></td>
                {%if alumno.nivel_id == None%}
                <td>Profesor a cargo</td>
                {%else%}
                <td>Sistema</td>
                {%endif%}
                {%if alumno.nivel_id == None%}
                <td>-</td>
                {%else%}
                <td>{{alumno.nivel_id}}</td>
                {%endif%}
                
              </tr>
            {%endfor%}
            </tbody>
          </table>
        </div>
        
      </div>
      {%endif%}
    

        <!-- Bootstrap core JavaScript -->
  <script src=" {% static 'vendor/jquery/jquery.min.js' %}"></script>
  <script src=" {% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>

  <!-- Bootstrap core JavaScript -->
  <script src=" {% static 'vendor/jquery/jquery.min.js' %}"></script>
  <script src=" {% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <script type="text/javascript" src="//cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script>
        $(document).ready( function () {
            $('#mydatatable').DataTable();
        } );
    </script>
</section>
</body>